# Internationalization (i18n)

The project uses Mozilla Fluent for internationalization with support for English (en-US) and Japanese (ja-JP).

## Translation File Structure

```
locales/
â”œâ”€â”€ en-US/
â”‚   â”œâ”€â”€ main.ftl       # App title, pane labels, status bar
â”‚   â”œâ”€â”€ help.ftl       # Help screen (~40 strings)
â”‚   â”œâ”€â”€ settings.ftl   # Settings labels & descriptions (~50 strings)
â”‚   â”œâ”€â”€ dialogs.ftl    # Dialog titles & prompts (~33 strings)
â”‚   â”œâ”€â”€ status.ftl     # Status messages & labels (~18 strings)
â”‚   â””â”€â”€ commands.ftl   # Command response messages (~18 strings)
â””â”€â”€ ja-JP/
    â””â”€â”€ (same structure)
```

**Key translation prefixes:**
- `pane-*` - Pane titles (folders, downloads, history, details)
- `tree-*` - Folder tree labels (completed-node)
- `status-*` - Download status labels (pending, downloading, deleted, etc.)
- `cmd-*` - Command response messages (errors, success)

## Adding New Translation Strings

1. **Add keys to all .ftl files** in both `locales/en-US/` and `locales/ja-JP/`
2. **Use naming convention:** `{section}-{context}-{element}`
   - Examples: `help-section-primary`, `settings-app-max-concurrent`, `dialog-add-download`
3. **Simple strings:** Use `app.state.t("key")`
   ```rust
   let title = app.state.t("dialog-help");
   ```
4. **With variables:** Use `app.state.t_with_args("key", Some(&fluent_args!{...}))`
   ```rust
   use fluent::fluent_args;
   let args = fluent_args! {
       "label" => field.label(),
   };
   let title = app.state.t_with_args("dialog-edit-label", Some(&args));
   ```

## Adding New Languages

1. Create `locales/{locale}/` directory (e.g., `locales/zh-CN/`)
2. Copy all `.ftl` files from `en-US` as template
3. Translate all strings to target language
4. Update `src/util/i18n.rs` locale mapping if needed
5. Add language code validation in `src/tui/app.rs` (Language setting handler)
6. Update documentation (README.md, Config.md)

## Translation Best Practices

- **Keep keys descriptive** - `status-downloading` not `st-dl`
- **Group related keys** - Use consistent prefixes (e.g., all help keys start with `help-`)
- **Include context** - `dialog-add-download` vs generic `add-download`
- **Preserve formatting** - Emojis and special characters (ðŸ“‹, âœ…) are part of the design
- **Test both languages** - Always verify translations display correctly in the TUI
- **Don't translate code** - Comments and code should remain in English
